<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
</head>
<body>
<form method="post">
    {{ form.hidden_tag() }}
    <p>
        {{ form.brand.label }}
        {{ form.brand }}
    </p>
    <p>{{ form.submit(type='button', **{"onclick":"models_for_brand_name()"}) }}</p>
</form>
<table id="tab">

</table>
</body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    var csrftoken = "{{csrf_token()}}"

    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken)
            }
        }
    });

    function models_for_brand_name() {
        var name = $("#{{ form.brand.id }}").val()
        $.post('{{ url_for('get_models_for_brand_name') }}', {
            name: name
        }).done(function (response) {
            var table = $("#tab")
            table.find('tr').remove()
            $.each(response, function (key, value) {
                table.append('<tr><td>'+value+'</td></tr>')
            });
        })
    }
</script>
</html>
